<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>IFI Framework</title>
  <!-- Bootstrap core CSS-->
  <link href="web/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom fonts for this template-->
  <link href="web/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <!-- Page level plugin CSS-->
  <link href="web/vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">
  <!-- Custom styles for this template-->
  <link href="web/css/sb-admin.css" rel="stylesheet">
</head>

<body class="fixed-nav sticky-footer bg-dark" id="page-top">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <a class="navbar-brand" href="index.html">Play Framework</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav navbar-sidenav" id="exampleAccordion">
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="TP">
          <a class="nav-link" href="index.html">
            <i class="fa fa-fw fa-dashboard"></i>
            <span class="nav-link-text">TP</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="installation.html">
            <i class="fa fa-fw fa-floppy-o"></i>
            <span class="nav-link-text">Installation</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="controleur.html">
            <i class="fa fa-fw fa-check-square-o"></i>
            <span class="nav-link-text">Contrôleur</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="routage.html">
            <i class="fa fa-fw fa-road"></i>
            <span class="nav-link-text">Routage</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="twirl.html">
            <i class="fa fa-fw fa-html5"></i>
            <span class="nav-link-text">Twirl</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="ebean.html">
            <i class="fa fa-fw fa-database"></i>
            <span class="nav-link-text">Ebean</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="autres.html">
            <i class="fa fa-fw fa-area-chart"></i>
            <span class="nav-link-text">Sessions et flash</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Installation">
          <a class="nav-link" href="form.html">
            <i class="fa fa-fw fa-wpforms"></i>
            <span class="nav-link-text">Formulaire</span>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav sidenav-toggler">
        <li class="nav-item">
          <a class="nav-link text-center" id="sidenavToggler">
            <i class="fa fa-fw fa-angle-left"></i>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/HeleneMyr/IFI-PLAY">
            <i class="fa fa-fw fa-github-square"></i>Github</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="content-wrapper">
    <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">IFI PlayFramework</a>
        </li>
        <li class="breadcrumb-item active">TP</li>
      </ol>

      <div>
        <h1>TP Play "Kaban"</h1>
        <p>Le but de ce TP est de créer un tableau de gestion des tâches à l'aide du framework Play</p>
        <h2>Partie 1 : Affichage d'une vue</h2>
        <ol>
          <li><a href="installation.html">Clonez et setup le projet sur votre IDE préféré.</a></li>
          <li>
              Réaliser un <a href="controleur.html">controlleur</a> <code>BoardController.java</code>. <br />
              Ce controlleur va nous servir de point d'entrée des requêtes HTTP.
          </li>
          <li>
              Dans ce controller, créer une méthode <code>index()</code> qui va renvoyer la réponse <code>ok()</code> avec la vue board.scala.html.<br />
              Pour passer un paramètre à cette vue, il suffit de donner le paramètre à la fonction render() (<code>views.html.board.render(monParam)</code>).<br />
              Afin que la vue accepte ce paramètre, ajoutez sur la première ligne de la vue <code>board</code> le type des paramètres : <br />
              <code>@(param: TypeParam)</code>
          </li>
          <li>
            Ajoutez la <a href="routage.html">route</a> permettant d'accéder à la méthode du controller dans le fichier <code>conf/routes</code>.
          </li>
          <li>
            Regardez le resultat de votre travail sur <code>http://localhost:9000/votreRoute</code>
          </li>
        </ol>
        <p>
          Bravo, vous avez réussi à afficher une page html dynamique avec PLAY !<br />
          Maintenant, nous allons modifier l'affichage de cette page afin d'y afficher un tableau de tâches.
        </p>
        <ol>
          <li>
            Pour cela, il va falloir aller chercher la liste des tâches à l'aide du service <code>TaskService.java</code>.<br />
            Pour accéder à ce service, il faut l'importer dans le constructeur du controlleur à l'aide de l'annotation <code>@Inject</code>.
          </li>
          <li>
            Une fois ijecté, vous allez pouvoir récupérer une <code>List&lt;Task></code> à l'aide de la fonction getAll() du service.<br />
            Pour le moment, cette fonction renvoie une liste de tâches en dur.
          </li>
          <li>
            Vous avez maintenant une liste de tâche dans votre méthode index() de votre controller. Il va donc falloir l'envoyer dans votre vue afin de l'afficher.<br />
            Remplacez la string en paramètre de votre vue par votre liste de tâches et ajuster le type du paramètre en haut de votre vue.<br />
            Il faut maintenant afficher cette liste. La fonction <a href="twirl.html">twirl</a> <code>@for</code>
          </li>
        </ol>
        <p>
          Vous devez maintenant avoir un affichage des tâches existant sur votre page. <br />
          Cependant ces données sont codés en dur dans le service. Le but sera maintenant de remplacer ces données en dur par un appel au "repository" et à la base de donnée.
        </p>
        <ol>
          <li>Ouvrez maintenant le fichier TaskRepository.java et créer-y une fonction findAll() qui retournera une liste de tâches.</li>
          <li>
            Dans cette fonction, utilisez les fonctionnalités de <a href="ebean.html">EbeanServer</a> afin de retourner la liste des tâches de la base de données.<br />
            Dans un premier temps, cette fonction sera synchrone.
          </li>
          <li>
            Remplacez maintenant le code dans le service afin d'appeler votre fonction findAll du repository. (Injectez le TaskRepository si nécessaire).<br />
            Vous devriez avoir une autre liste de tâches affiché dans votre page, félicitaion si c'est le cas !
          </li>
          <li>
            Malheuresement, ce code ne respecte pas le principe asynchrone de play. Il ne sera pas très scalable :(<br />
            Pour régler ce problème, il va falloir modifier le code de votre fonction <code>findAll</code> afin de le rendre asynchrone. Pour cela, allez voir le <a href="ebean.html">principe de l'asyncrhone</a>
          </li>
          <li>
            Il va enfin falloir répercuter ce changement dans le reste du code (controlleur et service).<br />
            Ajustez leur type de retour et dans le controlleur, modifier votre code afin de gérer l'asynchrone. (voir <a href="controleur.html">Contexte d'exécution : HttpExecutionContext pour le contrôleur</a>)
          </li>
        </ol>
        <p>
          Votre code devrait faire exactement la même chose mais en asynchrone... Félicitation ! ;)
        </p>
        <h2>Partie 2 : Création une tâche</h2>
        <p>
          Dans cette partie, nous allons voir comment créer une tâche et l'enregistrer dans la base de donnée.<br />
          Cette partie sera moins guidée que la précédente, n'hésitez pas à aller voir les documentations dans le menu !
        </p>

        <ol>
          <li>
            Dans le controlleur, créer un objet <a href="form.html">formulaire</a> de type Task à l'aide de la factory.
          </li>
          <li>Dans la vue board, créez un formulaire de création de tâche associé à votre objet form à l'aide des <a href="form.html">helpers twirl</a>.</li>
          <li>
            Votre formulaire va pointer vers une action (une méthode d'un controller). <br />
            Créez donc votre méthode create() dans votre controller et faites pointer le formulaire vers cette méthode.<br />
            N'oubliez pas d'ajouter la route associée dans votre fichier routes !
          </li>
          <li>
            Pour récupérer les informations entrées dans le formulaire, il va falloir créer un objet Form à l'aide de la factory dans votre controlleur update.<br />
            Ensuite, il va falloir récupérer les valeurs du formulaire dans notre objet form à l'aide de la <a href="form.html">bonne fonction</a>.
          </li>
          <li>
            Vous devriez avoir un objet Form dans votre controller comportant les valeurs entrées dans les champs du formulaire.<br />
            Créez maintenant le service et repository associé pour sauvgarder votre Tâche.
          </li>
          <li>
            Une fois de retour dans votre controlleur, il va falloir <a href="controleur.html">rediriger</a> l'utilisateur vers la page d'affichage.
          </li>
          <li>
            Maintenant, gérez les erreurs dans votre formulaire.<br />
            Si le formulaire est valide, la tâche est créée et l'utilisateur redirigé sur la liste des tâches.<br />
            Sinon, l'utilisateur est redirigé sur la liste des tâches avec un message d'erreur. Utilisez <a href="autres.html">flash</a> pour gérer l'erreur !
          </li>
          <li>
            Si ce n'est pas fait, modifier votre Repository pour effectuer la requête en asynchrone et répercutez ce changement dans votre service et votre controller.<br />
            Vous devriez maintenant être capable d'ajouter une tâche à la liste.
          </li>
        </ol>
        <p>
          Félicitaiton, vous avez maintenant un formulaire de création de tâche ! :)
        </p>
        <h2>Partie 3 - Edition d'une tâche</h2>
        <p>
          Le but de cette partie est d'éditer une tâche afin de changer son status (TODO, IN PROGRESS, READY FOR TEST, DONE).<br />
          Pour cela, une édition de la tâche sera nécessaire.<br />
        </p>
        <ol>
          Dans un premier temps, affichez les tâches en les plaçant dans la bonne colonne du tableau. (<code>@if</code>).
        </ol>
        <ol>
          Modifiez l'affichage de vos tâches pour ajouter un lien menant vers un formulaire d'édition.<br />
          Vous devez donc :
          <ul>
            <li>Créer une méthode <code>edit(id)</code> dans le controlleur</li>
            <li>Créer une vue <code>edit.scala.html</code></li>
            <li>Ajouter la route</li>
            <li>Créer un ensemble service + repository afin de récupérer une tâche à partir de son id</li>
            <li>Dans le controlleur, afficher la vue avec un formulaire rempli déjà rempli avec la tâche récupérée</li>
            <li>Créer un formulaire dans votre vue "edit" qui pointe vers une autre méthode <code>update(id)</code></li>
            <li>Créer un ensemble service + repository afin de mettre à jour une tâche</li>
            <li>Dans la méthode <code>update(id)</code> enregistrez la nouvelle tâche et redirigez vers la liste des tâches en cas de succès ou vers le formulaire d'édition en cas d'echec.</li>
          </ul>
        </ol>
        <p>
          Vous devriez maintenant être capable de modifier une tâche (nom, description, status) et le status devrait définir dans quelle colonne afficher la tâche.
          N'oubliez pas de réaliser tout cela en asynchrone ! ;)
        </p>

        <h2>Pour aller plus loin</h2>
        <p>
          Ce TP touche à sa fin. Si vous le souhaitez, vous pouvez améliorer votre code pour par exemple :
        </p>
        <ul>
          <li>Créer une page de login avec un champ "nom" et stocker ce nom en session pour l'afficher en titre de chaque page.</li>
          <li>Les status sont gérés avec un <code>enum</code>. Changez cela pour enregistrer ces status en base !</li>
        </ul>
      </div>

    </div>
    <!-- /.container-fluid-->
    <!-- /.content-wrapper-->
    <footer class="sticky-footer">
      <div class="container">
        <div class="text-center">
          <small>Louis - Alex - Hélène</small>
        </div>
      </div>
    </footer>
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fa fa-angle-up"></i>
    </a>
    <!-- Bootstrap core JavaScript-->
    <script src="web/vendor/jquery/jquery.min.js"></script>
    <script src="web/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="web/vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Page level plugin JavaScript-->
    <script src="web/vendor/chart.js/Chart.min.js"></script>
    <script src="web/vendor/datatables/jquery.dataTables.js"></script>
    <script src="web/vendor/datatables/dataTables.bootstrap4.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="web/js/sb-admin.min.js"></script>
    <!-- Custom scripts for this page-->
    <script src="web/js/sb-admin-datatables.min.js"></script>
    <script src="web/js/sb-admin-charts.min.js"></script>
  </div>
</body>

</html>
